lint:
  stage: test
  image: eclipse-temurin:17-jdk
  before_script:
    - cd car4u
  script:
    - ./gradlew -q detekt
  except:
    - schedules

test:
  stage: test
  image: eclipse-temurin:17-jdk
  before_script:
    - cd car4u
  script:
    - ./gradlew -q test
  except:
    - schedules

notify_v2:
  stage: notify
  image: eclipse-temurin:17-jdk
  before_script:
    - mv scraper/$SCRAPE_OUTPUT_FILENAME car4u/
    - cd car4u
  script:
    - cat $SCRAPE_OUTPUT_FILENAME | ./gradlew -q run --no-daemon
  rules:
    - if: '$CI_PIPELINE_SOURCE == "schedule"'
